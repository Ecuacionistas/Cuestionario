<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trivia Challenge</title>
  <style>
    body { 
      font-family: "Digital-7", monospace; 
      padding: 20px; 
      background: #000000;
      color: #00FF00; 
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      height: 100vh;
      text-align: center;
      margin: 0;
      overflow: hidden;
    }

    h1 {
      font-size: 40px;
      margin-bottom: 10px;
      animation: typing 3s steps(30) 1s 1 normal both;
    }

    .pixel-art {
      font-family: monospace;
      white-space: pre;
      line-height: 10px;
      font-size: 8px;
      margin-bottom: 20px;
      color: #00FF00;
    }

    .question { 
      margin-bottom: 20px;
      opacity: 0;
      transform: translateY(-20px);
      animation: fadeIn 1s forwards;
    }

    .typing-question {
      overflow: hidden;
      display: inline-block;
      white-space: normal;
      animation: typing 3s steps(30) 1s 1 normal both;
    }

    .hidden { display: none; }

    button { 
      margin-top: 20px; 
      padding: 10px 20px; 
      font-size: 16px; 
      color: #00FF00; 
      border: 2px solid #00FF00; 
      background-color: #000000;
      font-family: "Digital-7", monospace;
      cursor: pointer;
    }

    .result { 
      margin-top: 20px; 
      font-size: 20px; 
      font-weight: bold; 
      color: #00FF00; 
    }

    .chinese-characters {
      font-size: 24px;
      margin-top: 20px;
      color: #00FF00;
      display: inline-block;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(-20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    @keyframes questionTyping {
      from { width: 0; }
      to { width: 100%; }
    }

    #lore {
      font-size: 18px;
      margin-bottom: 40px;
      text-align: justify;
      width: 80%;
      margin: 20px;
      white-space: nowrap;
      overflow: hidden;
      animation: typing 3s steps(30) 1s 1 normal both;
    }

    @media (min-width: 768px) {
      body {
        justify-content: flex-start;
        align-items: center;
        height: auto;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 40px;
      }
      #quiz {
        width: 50%;
        margin-top: 40px;
      }
    }

    @media (max-width: 767px) {
      h1 {
        font-size: 30px;
        margin-bottom: 20px;
      }
      #quiz {
        width: 80%;
        margin-top: 40px;
      }
    }
  </style>
</head>
<body>
  <h1>Cuestionario</h1>

  <div class="pixel-art">
"
  TTTTTTT  SSSSS  M     M   CCCCC
T    S        MM   MM  C
T    SSSSS    M M M M  C
T        S    M  M  M  C
    T    SSSSS    M     M   CCCCC

         .------------------.
         | 🇹🇼 🇹🇼 🇹🇼 🇹🇼 🇹🇼 |
         | 🇹🇼 🇹🇼 🇹🇼 🇹🇼 🇹🇼 |
         | 🇹🇼 🇹🇼 🇹🇼 🇹🇼 🇹🇼 |
         '------------------'
"
  </div>

  <div id="lore">
    <p><strong>Introducción al juego:</strong></p>
    <p>Un devastador terremoto ha golpeado Taiwán, causando una catástrofe que afectó gravemente la producción de microchips en todo el país. La cadena de suministro de semiconductores se ha visto severamente interrumpida, lo que ha generado una caída del 50% en la producción global. Las fábricas, en su mayoría en Taiwán, están en ruinas, y los líderes industriales están luchando por recuperar el control.</p>
    <p>En medio de este caos, la gigante TSMC (Taiwan Semiconductor Manufacturing Company), conocida por ser uno de los principales productores de microchips del mundo, se encuentra en una posición vulnerable. Sus sistemas están inactivos, y la seguridad está comprometida. La única oportunidad de tomar el control de la empresa recae en tus manos.</p>
    <p>Tu misión es hackear los sistemas de TSMC aprovechando la vulnerabilidad creada por el desastre. Para ello, deberás demostrar tus conocimientos sobre microchips, tecnología, y las tensiones entre Taiwán, China y Estados Unidos. Solo superando este cuestionario podrás obtener la clave para acceder a los sistemas críticos de la empresa.</p>
    <p>¡El destino de la industria tecnológica está en tus manos! ¿Estás listo para enfrentar este desafío?</p>
  </div>

  <button id="startBtn" onclick="startQuiz()">Iniciar Cuestionario</button>

  <div id="quiz" class="hidden"></div>
  <button id="nextBtn" onclick="nextQuestion()" class="hidden">Siguiente pregunta</button>
  <div id="result" class="result hidden"></div>

  <script>
    const questions = [...]; // <-- (Acá va tu array largo de preguntas que ya tenías)

    const chineseCharacters = ["台灣", "中國", "美國", "半導體", "電子", "科技", "革命", "創新", "未來", "世界"];

    let currentQuestionIndex = 0;
    let answers = [];
    let shuffledQuestions;

    const quizDiv = document.getElementById("quiz");
    const nextBtn = document.getElementById("nextBtn");
    const startBtn = document.getElementById("startBtn");
    const resultDiv = document.getElementById("result");
    const loreDiv = document.getElementById("lore");

    function shuffleQuestions() {
      const shuffled = questions.sort(() => Math.random() - 0.5);
      return shuffled.slice(0, 10);
    }

    function getRandomChineseCharacters() {
      const randomIndex = Math.floor(Math.random() * chineseCharacters.length);
      return chineseCharacters[randomIndex];
    }

    function showQuestion(index) {
      quizDiv.innerHTML = ''; 
      const q = shuffledQuestions[index];
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `
        <p class="typing-question">
          ${index + 1}. ${q.q}
        </p>` +
        q.options.map((opt, i) => `
          <label><input type="radio" name="q${index}" value="${i}"> ${opt}</label><br>
        `).join("") +
        `<div class="chinese-characters">${getRandomChineseCharacters()}</div>`;
      quizDiv.appendChild(div);

      nextBtn.disabled = true;

      const radios = document.getElementsByName(`q${index}`);
      radios.forEach(radio => {
        radio.addEventListener('change', () => {
          nextBtn.disabled = false;
        });
      });

      setTimeout(() => {
        div.style.opacity = 1;
        div.style.transform = 'translateY(0)';
      }, 300);
    }

    function nextQuestion() {
      const selected = document.querySelector(`input[name="q${currentQuestionIndex}"]:checked`);
      if (selected) {
        answers[currentQuestionIndex] = parseInt(selected.value);
      }
      
      currentQuestionIndex++;

      if (currentQuestionIndex < shuffledQuestions.length) {
        showQuestion(currentQuestionIndex);
      } else {
        showResult();
      }
    }

    function showResult() {
      let correct = 0;
      shuffledQuestions.forEach((q, index) => {
        if (answers[index] === q.answer) {
          correct++;
        }
      });
      if (correct >= 7) {
        resultDiv.innerHTML = `✨ ¡Felicitaciones! Tu contraseña es: <strong>PREMIO2025</strong>`;
      } else {
        resultDiv.innerHTML = `❌ Lo siento, necesitas al menos 7 respuestas correctas. Intentá de nuevo.`;
      }
      resultDiv.classList.remove("hidden");
    }

    function startQuiz() {
      loreDiv.classList.add("hidden");
      startBtn.classList.add("hidden");
      quizDiv.classList.remove("hidden");
      nextBtn.classList.remove("hidden");

      shuffledQuestions = shuffleQuestions();
      showQuestion(currentQuestionIndex);
    }
  </script>
</body>
</html>
